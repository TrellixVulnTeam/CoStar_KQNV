-file("test/lib/hipe/regalloc/hipe_adj_list.erl", 1).

-module(hipe_adj_list).

-author("Andreas Wallin").

-export([new/1,add_edge/3,remove_edge/3,edges/2]).

new(Max_nodes) ->
    hipe_vectors:new(Max_nodes, []).

add_edge(U, V, Adj_list) ->
    hipe_vectors:set(Adj_list, U, [V|hipe_vectors:get(Adj_list, U)]).

remove_edges(U, Vs, Adj_list) when is_list(Vs), is_integer(U) ->
    hipe_vectors:set(Adj_list, U, hipe_vectors:get(Adj_list, U) -- Vs).

remove_edge(U, U, Adj_list) ->
    Adj_list;
remove_edge(U, V, Adj_list) when is_integer(U), is_integer(V) ->
    remove_edges(U, [V], Adj_list).

edges(U, Adj_list) ->
    hipe_vectors:get(Adj_list, U).



