-file("test/lib/dialyzer/test/race_SUITE_data/src/ets_insert_public.erl",
      1).

-module(ets_insert_public).

-export([main/1]).

main(Foo) ->
    make_table(Foo),
    ets:insert(Foo, {counter,0}),
    [{_,N}] = ets:lookup(Foo, counter),
    NewN = N + 1,
    ets:insert(Foo, {counter,NewN}),
    NewN.

make_table(Foo) ->
    init(Foo).

init(Foo) ->
    ets:new(Foo, [named_table,public]),
    ets:insert(Foo, {counter,0}),
    {ok,feeling_good}.



