-file("test/lib/kernel/src/erl_reply.erl", 1).

-module(erl_reply).

-export([reply/1]).

-spec reply([atom()]) -> ok | reply_done.

reply([Addr,Port,Msg]) ->
    Ip = ip_string_to_tuple(atom_to_list(Addr)),
    P = list_to_integer(atom_to_list(Port)),
    M = atom_to_list(Msg),
    {ok,S} = gen_tcp:connect(Ip, P, []),
    gen_tcp:send(S, M),
    gen_tcp:close(S),
    reply_done;
reply(_) ->
    error_logger:error_msg("erl_reply: Can't find address and port to r"
                           "eply to~n").

ip_string_to_tuple(Ip) ->
    [Ip1,Ip2,Ip3,Ip4] = string:tokens(Ip, "."),
    {list_to_integer(Ip1),
     list_to_integer(Ip2),
     list_to_integer(Ip3),
     list_to_integer(Ip4)}.



